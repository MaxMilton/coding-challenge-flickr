!function(){"use strict";function t(){}function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t,e){e.appendChild(t)}function o(t,e,n){e.insertBefore(t,n)}function r(t){t.parentNode.removeChild(t)}function s(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function i(t){return document.createElement(t)}function a(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function c(t){return document.createTextNode(t)}function h(t,e,n){t.addEventListener(e,n,!1)}function f(t,e,n){t.removeEventListener(e,n,!1)}function u(t,e,n){t.setAttribute(e,n)}function l(){return Object.create(null)}function p(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function d(t,e){return t!=t?e==e:t!==e}function _(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var o=0;o<n.length;o+=1){var r=n[o];if(!r.__calling)try{r.__calling=!0,r.call(this,e)}finally{r.__calling=!1}}}function m(){return this._state}function v(t,e){t._handlers=l(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=e.store||t.root.store}function g(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}}function w(t){for(;t&&t.length;)t.shift()()}function b(){this.store._remove(this)}var y={destroy:function(e){this.destroy=t,this.fire("destroy"),this.set=t,this._fragment.d(!1!==e),this._fragment=null,this._state={}},get:m,fire:_,on:g,set:function(t){this._set(e({},t)),this.root._lock||(this.root._lock=!0,w(this.root._beforecreate),w(this.root._oncreate),w(this.root._aftercreate),this.root._lock=!1)},_recompute:t,_set:function(t){var n=this._state,o={},r=!1;for(var s in t)this._differs(t[s],n[s])&&(o[s]=r=!0);r&&(this._state=e(e({},n),t),this._recompute(o,this._state),this._bind&&this._bind(o,this._state),this._fragment&&(this.fire("state",{changed:o,current:this._state,previous:n}),this._fragment.p(o,this._state),this.fire("update",{changed:o,current:this._state,previous:n})))},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:p};function k(t,n){this._handlers={},this._dependents=[],this._computed=l(),this._sortedComputedProperties=[],this._state=e({},t),this._differs=n&&n.immutable?d:p}e(k.prototype,{_add:function(t,e){this._dependents.push({component:t,props:e})},_init:function(t){for(var e={},n=0;n<t.length;n+=1){var o=t[n];e["$"+o]=this._state[o]}return e},_remove:function(t){for(var e=this._dependents.length;e--;)if(this._dependents[e].component===t)return void this._dependents.splice(e,1)},_set:function(t,n){var o=this._state;this._state=e(e({},o),t);for(var r=0;r<this._sortedComputedProperties.length;r+=1)this._sortedComputedProperties[r].update(this._state,n);this.fire("state",{changed:n,previous:o,current:this._state});for(var s=this._dependents.slice(),i=0;i<s.length;i+=1){for(var a=s[i],c={},h=!1,f=0;f<a.props.length;f+=1){var u=a.props[f];u in n&&(c["$"+u]=this._state[u],h=!0)}h&&a.component.set(c)}this.fire("update",{changed:n,previous:o,current:this._state})},_sortComputedProperties:function(){var t,e=this._computed,n=this._sortedComputedProperties=[],o=l();function r(s){var i=e[s];i&&(i.deps.forEach(function(e){if(e===t)throw new Error("Cyclical dependency detected between "+e+" <-> "+s);r(e)}),o[s]||(o[s]=!0,n.push(i)))}for(var s in this._computed)r(t=s)},compute:function(t,n,o){var r,s=this,i={deps:n,update:function(e,i,a){var c=n.map(function(t){return t in i&&(a=!0),e[t]});if(a){var h=o.apply(null,c);s._differs(h,r)&&(r=h,i[t]=!0,e[t]=r)}}};this._computed[t]=i,this._sortComputedProperties();var a=e({},this._state),c={};i.update(a,c,!0),this._set(a,c)},fire:_,get:m,on:g,set:function(t){var e=this._state,n=this._changed={},o=!1;for(var r in t){if(this._computed[r])throw new Error("'"+r+"' is a read-only property");this._differs(t[r],e[r])&&(n[r]=o=!0)}o&&this._set(t,n)}});var x=0,N=function(){};var C=function(t,e,n){"function"==typeof e&&(n=e,e={}),e||(e={});var o,r,s=e.prefix||"__jp",i=e.name||s+(x+=1),a=e.param||"callback",c=null!=e.timeout?e.timeout:6e4,h=encodeURIComponent,f=document.getElementsByTagName("script")[0]||document.head;function u(){o.parentNode&&o.parentNode.removeChild(o),window[i]=N,r&&clearTimeout(r)}return c&&(r=setTimeout(function(){u(),n&&n(new Error("Timeout"))},c)),window[i]=function(t){u(),n&&n(null,t)},t=(t+=(~t.indexOf("?")?"&":"?")+a+"="+h(i)).replace("?&","?"),(o=document.createElement("script")).src=t,f.parentNode.insertBefore(o,f),function(){window[i]&&u()}};var j=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fetchPhotos=function(t){var e=this;C("https://api.flickr.com/services/feeds/photos_public.gne?format=json"+(t?"&tags="+t:""),{name:"jsonFlickrFeed"},function(n,o){if(n)throw n;e.set({photos:o.items}),function(t){var e=new URL(document.URL);e.searchParams.set("q",t),history.pushState(null,null,e)}(t)})},e}(k))({photos:[]});function M(s){v(this,s),this.store=j,this._state=e({},s.data),this._intro=!0,this._fragment=function(e,s){var l,p,d,_,m,v,g,w,b,y;function k(t){e.store.fetchPhotos(this.value)}return{c:function(){l=i("header"),p=i("nav"),(d=i("h1")).innerHTML='<a href="/" class="app-name svelte-12t0whk">FLICKR SEARCH</a>',_=c("\n\n    "),m=i("div"),v=a("svg"),g=a("path"),w=a("path"),b=c("\n\n      "),y=i("input"),d.className="svelte-12t0whk",u(g,"d","M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"),u(w,"d","M0 0h24v24H0z"),u(w,"fill","none"),u(v,"class","search-icon svelte-12t0whk"),u(v,"xmlns","http://www.w3.org/2000/svg"),u(v,"viewBox","0 0 24 24"),h(y,"change",k),u(y,"type","search"),y.className="search-input svelte-12t0whk",y.placeholder="Search photos by tag...",m.className="search svelte-12t0whk",p.className="container nav svelte-12t0whk",l.className="navbar svelte-12t0whk"},m:function(t,e){o(l,t,e),n(p,l),n(d,p),n(_,p),n(m,p),n(v,m),n(g,v),n(w,v),n(b,m),n(y,m)},p:t,d:function(t){t&&r(l),f(y,"change",k)}}}(this,this._state),s.target&&(this._fragment.c(),this._mount(s.target,s.anchor))}function P(t){return t&&t.substring(t.indexOf('"')+1,t.lastIndexOf('"'))}function E(t){var s,a,h,f,u,l,p,d,_,m,g,w,b,y,k,x,N;v(this,t),this._state=e({},t.data),this._intro=!0,this._fragment=(s=this._state,N=P(s.author),{c:function(){a=i("a"),h=i("div"),f=i("img"),l=c("\n  "),p=i("div"),d=i("div"),_=c("Author: "),m=c(N),g=c("\n    "),w=i("div"),b=c("Tags: "),y=c(s.tags),k=c("\n  "),(x=i("div")).innerHTML='<i class="icon-link svelte-xgwj96"></i> See on Flickr',f.src=u=s.media.m,f.className="photo svelte-xgwj96",f.alt=s.title,h.className="photo-wrapper svelte-xgwj96",d.className="photo-author svelte-xgwj96",w.className="photo-tags svelte-xgwj96",p.className="photo-info svelte-xgwj96",x.className="photo-link svelte-xgwj96",a.href=s.link,a.className="photo-item svelte-xgwj96",a.rel="noopener",a.target="_blank"},m:function(t,e){o(a,t,e),n(h,a),n(f,h),n(l,a),n(p,a),n(d,p),n(_,d),n(m,d),n(g,p),n(w,p),n(b,w),n(y,w),n(k,a),n(x,a)},p:function(t,e){t.media&&u!==(u=e.media.m)&&(f.src=u),t.title&&(f.alt=e.title),t.author&&N!==(N=P(e.author))&&(m.data=N),t.tags&&(y.data=e.tags),t.link&&(a.href=e.link)},d:function(t){t&&r(a)}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function T(t,e){var n;function s(t){return 0!==t.$photos.length?O:R}var i=s(e),a=i(t,e);return{c:function(){a.c(),n=document.createComment("")},m:function(t,e){a.m(t,e),o(n,t,e)},p:function(e,o){i===(i=s(o))&&a?a.p(e,o):(a.d(1),(a=i(t,o)).c(),a.m(n.parentNode,n))},d:function(t){a.d(t),t&&r(n)}}}function L(t,n){for(var o=[n.photo],r={},s=0;s<o.length;s+=1)r=e(r,o[s]);var i=new E({root:t.root,store:t.store,data:r});return{c:function(){i._fragment.c()},m:function(t,e){i._mount(t,e)},p:function(t,e){var n=t.$photos?function(t,e){for(var n={},o={},r={},s=t.length;s--;){var i=t[s],a=e[s];if(a){for(var c in i)c in a||(o[c]=1);for(var c in a)r[c]||(n[c]=a[c],r[c]=1);t[s]=a}else for(var c in i)r[c]=1}for(var c in o)c in n||(n[c]=void 0);return n}(o,[e.photo]):{};i._set(n)},d:function(t){i.destroy(t)}}}function S(t,e){var s,a,u=e.tag.name;return{c:function(){s=i("button"),a=c(u),s._svelte={component:t,ctx:e},h(s,"click",F),s.className="button svelte-1ptofhm"},m:function(t,e){o(s,t,e),n(a,s)},p:function(t,e){t.tags&&u!==(u=e.tag.name)&&(a.data=u),s._svelte.ctx=e},d:function(t){t&&r(s),f(s,"click",F)}}}function O(t,e){for(var n,a=e.$photos,c=[],h=0;h<a.length;h+=1)c[h]=L(t,$(e,a,h));return{c:function(){n=i("div");for(var t=0;t<c.length;t+=1)c[t].c();n.className="photo-group svelte-1ptofhm"},m:function(t,e){o(n,t,e);for(var r=0;r<c.length;r+=1)c[r].m(n,null)},p:function(e,o){if(e.$photos){a=o.$photos;for(var r=0;r<a.length;r+=1){var s=$(o,a,r);c[r]?c[r].p(e,s):(c[r]=L(t,s),c[r].c(),c[r].m(n,null))}for(;r<c.length;r+=1)c[r].d(1);c.length=a.length}},d:function(t){t&&r(n),s(c,t)}}}function R(t,e){for(var a,h,f,u,l=e.tags,p=[],d=0;d<l.length;d+=1)p[d]=S(t,z(e,l,d));return{c:function(){a=i("div"),(h=i("p")).textContent="No results... bummer. Try one of these:",f=c("\n\n    "),u=i("div");for(var t=0;t<p.length;t+=1)p[t].c();u.className="suggestions svelte-1ptofhm",a.className="container empty svelte-1ptofhm"},m:function(t,e){o(a,t,e),n(h,a),n(f,a),n(u,a);for(var r=0;r<p.length;r+=1)p[r].m(u,null)},p:function(e,n){if(e.tags){l=n.tags;for(var o=0;o<l.length;o+=1){var r=z(n,l,o);p[o]?p[o].p(e,r):(p[o]=S(t,r),p[o].c(),p[o].m(u,null))}for(;o<p.length;o+=1)p[o].d(1);p.length=l.length}},d:function(t){t&&r(a),s(p,t)}}}function $(t,e,n){var o=Object.create(t);return o.photo=e[n],o.each_value=e,o.photo_index=n,o}function z(t,e,n){var o=Object.create(t);return o.tag=e[n],o.each_value_1=e,o.tag_index=n,o}function F(t){var e=this._svelte,n=e.component,o=e.ctx;n.store.fetchPhotos(o.tag.tag)}function H(t){v(this,t),this.store=j,this._state=e(e(this.store._init(["photos"]),{tags:[{name:"Cats",tag:"cats"},{name:"Dogs",tag:"dogs"},{name:"Tyrannosaurus Rex",tag:"tyrannosaurus rex"},{name:"Graffiti",tag:"graffiti"},{name:"Akihabara",tag:"akihabara"},{name:"京都",tag:"京都"}]}),t.data),this.store._add(this,["photos"]),this._intro=!0,this._handlers.destroy=[b],t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=T(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,w(this._beforecreate),w(this._oncreate),w(this._aftercreate),this._lock=!1)}function A(n){var s,a,h,f,u,l,p;v(this,n),this._state=e({},n.data),this._intro=!0,n.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(s=this,this._state,l=new M({root:s.root,store:s.store}),p=new H({root:s.root,store:s.store}),{c:function(){l._fragment.c(),a=c("\n\n"),h=i("main"),p._fragment.c(),f=c("\n\n"),(u=i("footer")).innerHTML='<div class="container">Images subject to <a href="https://www.flickr.com/help/terms" rel="noopener" target="_blank">Flickr\'s terms</a> · <a href="https://github.com/MaxMilton/coding-challenge-flickr" rel="noopener" target="_blank">Source code on Github</a> · Made by <a href="https://github.com/MaxMilton" rel="noopener" target="_blank">Max Milton</a></div>',h.id="content",h.className="svelte-1p2azac",u.className="footer svelte-1p2azac"},m:function(t,e){l._mount(t,e),o(a,t,e),o(h,t,e),p._mount(h,null),o(f,t,e),o(u,t,e)},p:t,d:function(t){l.destroy(t),t&&(r(a),r(h)),p.destroy(),t&&(r(f),r(u))}}),n.target&&(this._fragment.c(),this._mount(n.target,n.anchor),this._lock=!0,w(this._beforecreate),w(this._oncreate),w(this._aftercreate),this._lock=!1)}e(M.prototype,y),e(E.prototype,y),e(H.prototype,y),e(A.prototype,y),new A({target:document.body});var B=new URLSearchParams(window.location.search.substring(1)).get("q");B&&j.fetchPhotos(B)}();
//# sourceMappingURL=bundle.js.map
